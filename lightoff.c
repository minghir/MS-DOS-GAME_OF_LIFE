#include <stdio.h>

#define MIN(a,b) (((a)<(b))?(a):(b))

char null1[25] = {0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0};
char null2[25] = {1,0,1,0,1,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,1,0,1,0,1};

char adjacency[25][25] = {
		{1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,0,0,0,1,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,0,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1}
		};

char inverted[23][23]={
		{0,1,1,1,0,0,0,1,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0},
		{1,1,0,1,1,0,1,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0},
		{1,0,1,1,1,1,0,1,1,0,0,0,1,1,0,1,1,1,1,1,0,1,0},
		{1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1},
		{0,1,1,0,1,1,0,0,0,0,1,0,1,0,1,0,0,1,0,1,1,1,0},
		{0,0,1,0,1,0,1,1,0,1,0,0,1,0,0,0,0,0,1,1,0,0,0},
		{0,1,0,1,0,1,1,0,1,1,0,0,0,1,0,1,1,1,0,0,0,1,0},
		{1,0,1,0,0,1,0,1,1,0,0,0,0,0,1,1,0,1,0,1,1,0,1},
		{0,0,1,0,0,0,1,1,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1},
		{1,0,0,0,0,1,1,0,0,0,1,0,1,0,1,0,1,1,0,1,0,0,1},
		{0,0,0,0,1,0,0,0,1,1,0,0,1,0,1,1,1,1,1,0,0,1,0},
		{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1},
		{0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,0,0,1,1,0},
		{1,1,1,0,0,0,1,0,1,0,0,0,1,1,1,0,0,0,1,0,0,0,0},
		{1,1,0,0,1,0,0,1,1,1,1,0,0,1,1,1,1,0,1,0,1,0,0},
		{0,0,1,0,0,0,1,1,1,0,1,0,0,0,1,1,0,1,0,1,1,0,1},
		{0,0,1,1,0,0,1,0,0,1,1,1,0,0,1,0,1,1,1,0,0,0,1},
		{0,0,1,0,1,0,1,1,0,1,1,0,1,0,0,1,1,0,1,1,1,0,0},
		{0,1,1,0,0,1,0,0,1,0,1,0,0,1,1,0,1,1,1,0,0,0,1},
		{1,0,1,0,1,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,1,0,1},
		{0,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,1,0,1,1,1,0},
		{0,0,1,1,1,0,1,0,1,0,1,1,1,0,0,0,0,0,0,0,1,1,1},
		{0,0,0,1,0,0,0,1,1,1,0,1,0,0,0,1,1,0,1,1,0,1,0}
		};


//char table[25]={1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};
//char table[25]={1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0};
//char table[25]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
char table[25]={1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0};
//char table[25]={1,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1};
char solution[25];		

char temptable[25];
char temptable2[25];

char solvetemp1[25];
char solvetemp2[25];
char solvetemp3[25];

int valid_solution = 0;

int check_solution(){
	int tally4=0;
	int i,j;
	
	memcpy(temptable2,temptable,25);

	for (i=0;i<25;i++){
		if (solution[i]==1)  {
			for (j=0;j<25;j++)  {
				if (adjacency[i][j]==1)   {
					temptable2[j]=(temptable2[j]+1)%2;
				}
			}
		}
	}
	
	for (i=0;i<25;i++) {
		if (temptable2[i]==1)  {
			tally4++;
		}
	}
	
	valid_solution = !tally4 ? 1 : 0;
	
	return valid_solution;
}
	
int shorten_solution(){
	int tally0=0;
	int tally1=0;
	int tally2=0;
	int tally3=0;
	int i;
	for (i=0;i<25;i++){
		solvetemp1[i]=(solution[i]+null1[i])%2;
		solvetemp2[i]=(solution[i]+null2[i])%2;
		solvetemp3[i]=(solution[i]+null1[i]+null2[i])%2;
		if (solution[i]==1) {tally0++;}
		if (solvetemp1[i]==1) {tally1++;}
		if (solvetemp2[i]==1) {tally2++;}
		if (solvetemp3[i]==1) {tally3++;}
	}
	if (tally3==MIN(MIN(MIN(tally0,tally1),tally2),tally3)){
		for (i=0;i<25;i++)  {
				solution[i]=solvetemp3[i];
		}
	}
	if (tally2==MIN(MIN(MIN(tally0,tally1),tally2),tally3)){
		for (i=0;i<25;i++)  {
			solution[i]=solvetemp2[i];
		}
	}
	
	if (tally1==MIN(MIN(MIN(tally0,tally1),tally2),tally3)){
		for (i=0;i<25;i++) {
			solution[i]=solvetemp1[i];
		}
	}
	return check_solution();
}

int solve(){
	int i,j;
	
	memcpy(temptable,table,25);
	
	for (i=0;i<23;i++){
		solution[i]=0;
		for (j=0;j<23;j++){
			solution[i]+=(inverted[i][j]*temptable[j]);
		} 
		solution[i]=solution[i]%2;
	}
	
	solution[23]=0;
	solution[24]=0;
	return shorten_solution();
	//return 1;
}
		
int main(){
	int i = 0;
	clrscr();
	for (i=0;i<25;i++){
		printf(" %d",table[i]);
		if(i%5 == 4)
			printf(" \n");
	}
	//solve();
	if(solve()){
		printf("=================\n");
		for (i=0;i<25;i++){
			printf(" %d",solution[i]);
			if(i%5 == 4)
				printf(" \n");
		}
	}else{
		printf("=================\nFara solutie\n");
	}
	
return 1;
}